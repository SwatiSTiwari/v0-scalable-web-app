# MongoDB Setup Guide

## Prerequisites
- MongoDB installed locally or Atlas account

## Option 1: Local MongoDB with Compass

### 1. Install MongoDB Community Edition
- **macOS**: `brew tap mongodb/brew && brew install mongodb-community`
- **Windows**: Download from https://www.mongodb.com/try/download/community
- **Linux**: Follow https://docs.mongodb.com/manual/installation/

### 2. Start MongoDB
\`\`\`bash
# macOS/Linux
brew services start mongodb-community

# Windows
mongod
\`\`\`

### 3. Install MongoDB Compass
- Download from: https://www.mongodb.com/products/tools/compass
- Open Compass and connect to `mongodb://localhost:27017`

### 4. Create Database
1. In Compass, click "Create Database"
2. Database name: `scalable_web_app`
3. Collection name: `users`
4. Click Create

5. Create another collection named `tasks`

## Option 2: MongoDB Atlas (Cloud)

### 1. Create an Account
- Go to https://www.mongodb.com/cloud/atlas
- Create a free account

### 2. Create a Cluster
- Click "Create a Cluster"
- Choose "Free Tier"
- Select your region
- Click "Create Cluster"

### 3. Create Database User
- Go to Security > Database Access
- Add New Database User
- Create username and password
- Choose "Autogenerated Secure Password"

### 4. Whitelist Your IP
- Go to Security > Network Access
- Click "Add IP Address"
- Choose "Allow Access from Anywhere" or add your IP

### 5. Get Connection String
- Click "Databases" > "Connect"
- Choose "Connect your application"
- Copy connection string
- Replace `<username>`, `<password>`, `<cluster>` with your credentials

### 6. Update .env.local
\`\`\`
MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/scalable_web_app?retryWrites=true&w=majority
\`\`\`

## Verify Connection

### Using Compass
1. Open MongoDB Compass
2. Enter connection string
3. Click "Connect"
4. Navigate to `scalable_web_app` database
5. You should see `users` and `tasks` collections

### Using Node.js
\`\`\`bash
node -e "
const { MongoClient } = require('mongodb');
const uri = process.env.MONGODB_URI || 'mongodb://localhost:27017';
MongoClient.connect(uri, (err, client) => {
  if (err) console.error('Connection failed:', err);
  else console.log('Connected successfully');
  client?.close();
});
"
\`\`\`

## Collections Schema

### users collection
\`\`\`json
{
  "_id": "uuid-string",
  "email": "user@example.com",
  "passwordHash": "sha256-hash",
  "name": "User Name",
  "createdAt": ISODate("2024-11-28T00:00:00Z")
}
\`\`\`

### tasks collection
\`\`\`json
{
  "_id": "uuid-string",
  "userId": "user-uuid",
  "title": "Task Title",
  "description": "Task Description",
  "status": "pending",
  "createdAt": ISODate("2024-11-28T00:00:00Z"),
  "updatedAt": ISODate("2024-11-28T00:00:00Z")
}
\`\`\`

## Troubleshooting

### Connection refused
- Ensure MongoDB service is running
- Check MONGODB_URI in .env.local
- Verify MongoDB is listening on the correct port (default: 27017)

### Database not found
- Collections are created automatically when first insert happens
- If using Compass, manually create collections as shown above

### Auth errors
- For Atlas, verify username/password and IP whitelist
- For local, MongoDB auth is disabled by default
\`\`\`
</parameter>
